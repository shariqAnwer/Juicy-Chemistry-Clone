
let data_all = [
    {
      name: "Sugarcane and Grapefruit Soap <br><br>",
    detail: "AHA Rich",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",

      reviews:"65 reviews",
      price:"450",
      mrpprice:"480",
      bgcolor:"#d4e6e5",
    img1: "https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      category:"gourment-cleansers",
      
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/Sugarcane_400x.png?v=1629444272",
    },
    {
      name: "Potato, Tomato and Lemongrass <br> Soap",
      detail: "For Tanning",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"136 reviews",
      price:"326",
      mrpprice:"480",
      bgcolor:"#d4e6e5",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/Potato_Tomato_400x.png?v=1629401892",
      category:"gourment-cleansers"
    
    },
    {
      name: "Damask Rose, Geranium and <br> Saffron Soap",
      detail: "For Brighter Skin",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"146 reviews",
      price:"852",
      mrpprice:"1180",
      bgcolor:"#d4e6e5",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/damaskrosesaffronsoap_600x.png?v=1629443001",
      category:"gourment-cleansers"
      
    },
    {
      name: "Carrot, Rosehip and Neroli <br> Soap",
      detail: "For Pigmentation",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"90 reviews",
      price:"456",
      mrpprice:"480",
      bgcolor:"#d4e6e5",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/Carrot_Rosehip_400x.png?v=1629401601",
       category:"cleansers"
     
    },
    {
      name: "Lime, Ginger and Rice Soap <br><br>",
      detail: "For Tanning",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"110 reviews",
      price:"854",
      mrpprice:"980",
      bgcolor:"#d4e6e5",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/limegingersoap_400x.jpg?v=1629376337",
       category:"cleansers"
     
    },
    {
      name: "Hemp, Tea Tree and Neem <br>Face Wash",
      detail: "For Acne-prone Skin",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"442 reviews",
      price:"420",
      mrpprice:"490",
      bgcolor:"#E4E5E0",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/800x2_bfe10761-5b67-44de-970e-9bdf7fb7b991_600x.png?v=1629129632",
       category:"cleansers"
     
    },
    {
      name: "White Tea and Sandalwood <br>Cleansing Balm",
      detail: "For All Skin Types",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"305 reviews",
      price:"533",
      mrpprice:"680",
      bgcolor:"#E4E5E0",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/MakeupCleanser_30ml_Ing_400x.jpg?v=1632819048",
      category: "makeup-cleaner"
 
    },
    {
      name: "Tamanu, Kakadu Plum and <br> Frankincense Face Wash",
      detail: "For Pigmentation",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"382 reviews",
      price:"230",
      mrpprice:"360",
      bgcolor:"#E4E5E0",
      img1:"https://cdn.shopify.com/s/files/1/0058/7779/2832/files/star.png?v=1625228699",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/800x2_600x.png?v=1629129601",
      category: "makeup-cleaner"
      
    },
    {
      name: "Saffron, Marula and Ylang<br> Ylang Face Wash",
      detail: "For Dull Skin",
       detail1: "This antioxidant-rich organic cleanser helps reduce the appearance of pigmentation and scarring. It also helps restore the skin's natural glow.Soap It is suitable for All skin types.",
      detail2:"Deep cleanses and removes impurities from pores",
      detail3:"Reduces the appearance of blemishes and scarring",
      detail4:"Boosts the skin’s ability to absorb nutrients",
      detail5:"Preserves the skin’s natural moisture",
      reviews:"242 reviews",
      price:"350",
      mrpprice:"470",
      bgcolor:"#E4E5E0",
      img1:"https://www.pngjoy.com/pngm/118/2422387_review-stars-5-black-star-review-transparent-png.png",
      img: "https://cdn.shopify.com/s/files/1/0058/7779/2832/products/800x2_73b8ae0f-0cde-401c-8981-8938533b5a59_600x.png?v=1629129667",
      category: "makeup-cleaner"
      
    },
  ];







let parent_curr = document.getElementById("products")

function showproducts(d) {


parent_curr.innerHTML =null;

d.forEach(function (product) {
      console.log(product.name);

let div = document.createElement("div");
div.id ="id-product-content";
div.class="class-main-div";
div.style.backgroundColor=product.bgcolor;



let img_product = document.createElement("img");
img_product.className="class-product-img";
  img_product.src = product.img;

  img_product.onclick = function () {
    localStorage.setItem("Product", JSON.stringify(product));
    
    window.location.href = "show_product.html"
  }

  
  

let product_detail = document.createElement("p");
product_detail.className="product_detail-text";
product_detail.textContent = product.detail;
product_detail.style.backgroundColor=product.bgcolor;

let product_price = document.createElement("p");
product_price.className="class-product-price";
product_price.textContent =+ product.price;
product_price.style.backgroundColor=product.bgcolor;

let product_mrp_price = document.createElement("p");
product_mrp_price.className="class-product-mrp-price";
product_mrp_price.id="class-product-mrp-price";
product_mrp_price.textContent = product.mrpprice;
product_mrp_price.style.backgroundColor=product.bgcolor;


let product_name = document.createElement("p");
product_name.className="class-product-name";
product_name.innerHTML =product.name;
product_name.style.backgroundColor=product.bgcolor;

let img_product_reviews = document.createElement("img");
img_product_reviews.className="class-product-img-reviews";
img_product_reviews.src = product.img1;


let product_reviews = document.createElement("p");
product_reviews.className="class-product-reviews";
product_reviews.style.backgroundColor=product.bgcolor;
product_reviews.innerHTML ="&#9733;&#9733;&#9733;&#9733;&#9733;"+"&nbsp&nbsp&nbsp&nbsp"+product.reviews;



let addtocard_btn = document.createElement("button");
addtocard_btn.className="class-product-button"

addtocard_btn.style.backgroundColor=product.bgcolor;

  addtocard_btn.innerHTML = "&#8377;" + product.price + "&nbsp&nbsp&nbsp&nbsp" + "<del>&nbsp" + "&#8377;" + product.mrpprice + "&nbsp</del>" + "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp" + "ADD TO CART" + "&nbsp&nbsp" + `<i class="btn-shopping-bag fas fa-shopping-bag"></i>`;
   

  // icncreasing quaintity










addtocard_btn.addEventListener("mouseenter", function(){
  addtocard_btn.style.backgroundColor="#204e3c";
})
addtocard_btn.addEventListener("mouseleave", function(){
  addtocard_btn.style.backgroundColor=product.bgcolor;

})
addtocard_btn.onclick = function() {

  if (JSON.parse(localStorage.getItem("cart")) == null) {
    localStorage.setItem("cart", JSON.stringify([]));
  }

  //checking if product is already in cart
  if (alreadyInCart(product)) {

  //this is cart js files
    showCartItems(JSON.parse(localStorage.getItem("cart")));
    //open cart;
    showCart();
  }
  
  else {
    let shopcart = JSON.parse(localStorage.getItem("cart"));
  product.quantity = 1;
  shopcart.push(product);
  localStorage.setItem("cart", JSON.stringify(shopcart));
  //this is cart js files
  if (JSON.parse(localStorage.getItem("cart")) !== null){
    showCartItems(JSON.parse(localStorage.getItem("cart")));
    //open cart;
    showCart();
  }
  }
  
  


};



div.append(img_product, product_name, product_detail , product_reviews, addtocard_btn);

parent_curr.append(div);


  });

}

showproducts(data_all);
  


 function sortLH(){
   let arr = data_all.sort(function(a, b){
     return a.price -b.price;
   });

   showproducts(arr);
 }

function sortHL(){

 let arr = data_all.sort(function(a, b){

   return b.price-a.price;
 });

 showproducts(arr);
}



// logic for sort
function sort(val) {
    if (val == '0') {
        reset();
    }   else if (val == '1') {
        sortLH();
    } else if (val == '2') {
        sortHL();
        
    } else if (val == '3') {
        sortBestselling();
    }
}
 function sortLH(){
   let arr = data_all.sort(function(a, b){
     return a.price -b.price;
   });
   

   showproducts(arr);
 }

function sortHL(){

 let arr = data_all.sort(function(a, b){

   return b.price-a.price;
 });

 showproducts(arr);
}

function sortBestselling() {
    let arr = data_all.sort(function (a, b) {
        return b.reviews.split(" ").map(Number)[0] - a.reviews.split(" ").map(Number)[0];
    })
    showproducts(arr);
}

function filter(e) {
    e.preventDefault();
    let filterby = null;
 var radios = document.getElementsByName('category');
    for (var radio of radios)
    {
        if (radio.checked) {
            filterby = radio.value;
            break;
        }
    }
  
    let arr = data_all.filter(function(a){
        return a.category == filterby
    });
    showproducts(arr);
     filter_cat.classList.remove("active-filter")


}



//opening and closing filter

let filter_cat = document.querySelector(".filter-cat")
function openfilter() {
    filter_cat.classList.add("active-filter")
} 

function closefilter() {
    filter_cat.classList.remove("active-filter")
} 



//check for already in cart
function alreadyInCart(p) {
  let cart = JSON.parse(localStorage.getItem("cart"));
  for (let i = 0; i < cart.length; i++){
    if (p.name === cart[i].name) {
      p.quantity++;
      return true;
    }
  }
  return false;

}